!function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/",a(a.s=1)}([function(t,e,a){},function(t,e,a){"use strict";a.r(e);a(0);var n=new Image;n.src="https://image.flaticon.com/icons/svg/2328/2328493.svg";var o=document.getElementById("gameCanvas").getContext("2d");function r(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=new Image;i.src="https://image.flaticon.com/icons/svg/2196/2196893.svg";var s=new Image;s.src="https://image.flaticon.com/icons/svg/651/651510.svg";var l=new Image;l.src="https://image.flaticon.com/icons/svg/2286/2286964.svg";var c=new Image;c.src="https://image.flaticon.com/icons/svg/209/209853.svg";var f=new Image;f.src="https://image.flaticon.com/icons/svg/2534/2534552.svg";var h=new Image;h.src="https://image.flaticon.com/icons/svg/2068/2068587.svg";var g=new Image;g.src="https://image.flaticon.com/icons/svg/2624/2624475.svg";var m=new Image;m.src="https://image.flaticon.com/icons/svg/2674/2674440.svg";var u=function(){function t(e,a,n){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){case"o":this.name="Octopus",this.currentHP=100,this.maxHP=100,this.monsterIMG=i,this.monsterATK=s,this.dmg=10,this.drops=["HP","G"];break;case"w":this.name="Werewolf",this.currentHP=150,this.maxHP=150,this.monsterIMG=f,this.monsterATK=h,this.dmg=20,this.drops=["HP","G","ATK"];break;case"v":this.name="Vampire",this.currentHP=200,this.maxHP=200,this.monsterIMG=l,this.monsterATK=c,this.dmg=50;break;case"r":this.name="Reaper",this.currentHP=1e3,this.maxHP=1e3,this.monsterIMG=g,this.monsterATK=m,this.dmg=90;break;default:this.name="Unknown",this.currentHP=1,this.maxHP=1,this.monsterIMG=i,this.monsterATK=s,this.dmg=1}this.x=a,this.y=n,this.attackX=null,this.attackY=null,this.moved=!1}var e,a,n;return e=t,(a=[{key:"takeDmg",value:function(t){return this.currentHP-=t,this.currentHP}},{key:"takeTurn",value:function(t,e){return null!==this.attackX||(t===this.x&&1===Math.abs(e-this.y)||e===this.y&&1===Math.abs(t-this.x))&&(this.attackX=t,this.attackY=e,null)}}])&&r(e.prototype,a),n&&r(e,n),t}(),v=function(t){return Math.floor(Math.random()*t)+1},y=new Image;y.src="https://image.flaticon.com/icons/svg/362/362944.svg";var b=new Image;b.src="https://image.flaticon.com/icons/svg/351/351764.svg";var d=new Image;d.src="https://www.flaticon.com/premium-icon/icons/svg/2401/2401054.svg";var P="#999",p=new Image;p.src="https://image.flaticon.com/icons/svg/506/506927.svg";var w=new Image;w.src="https://image.flaticon.com/icons/svg/1006/1006951.svg";var k=new Image;k.src="https://image.flaticon.com/icons/svg/361/361806.svg";var x=!1,I=972,M=90,S=0,H=[9,5],A={},T={},F=function(){T={},A={G:[],HP:[],MP:[]};for(var t=1;t<18;t++)T[t]={};for(var e=Math.floor(Math.log(v(34)-10)),a=0;a<e;a++){for(var n=H[0],o=H[1];H[0]===n&&H[1]===o;)n=v(17),o=v(9);var r=v(100);T[n][o]=new u(r>98?"r":r>80?"v":r>50?"w":"o",n,o)}};F(),A={G:[[17,1],[17,2]],HP:[[16,2],[16,3]],MP:[]};var E=0,O=["HP","MP"],j=20,G=50,R=!1,X=[null,null],C=!1,D=!1,K=!1,Y=document.getElementById("gameCanvas").getContext("2d"),_=function(){K=!K,U(0,0)},U=function(t,e){if(window.items=A,!(H[0]<0)&&(H[0]+t!==0&&H[0]+t!==18||5===H[1])&&(H[1]+e!==0&&H[1]+e!==10||9===H[0])){var a=!1;if(Object.values(T).forEach((function(n){Object.values(n).forEach((function(n){n.x===H[0]+t&&n.y===H[1]+e&&(a=!0)}))})),a||K)return K?(Y.beginPath(),Y.globalAlpha=.5,Y.fillStyle="#555",Y.rect(100,100,750,350),Y.fill(),Y.font="30px Roboto, sans serif",Y.fillStyle="#FFF",Y.fillText("Arrow keys = Movement",110,160),Y.fillText("Spacebar = Use Item/Start Attack",110,210),Y.fillText("Z = Inventory",110,270),Y.fillText("Spacebar (After Starting Attack) = Attack/Wait",110,330),Y.font="15px Roboto, sans serif",Y.fillText("Waiting occurs when you hit an empty area",500,350),Y.font="30px Roboto, sans serif",Y.fillText("Esc = Show/Hide Controls",110,430),Y.globalAlpha=1,void Y.closePath()):void 0;H[0]+=t,H[1]+=e;var r,i,s=!1;5===H[1]?0===H[0]?(H[0]=17,F(),s=!0):18===H[0]&&(H[0]=1,F(),s=!0):9===H[0]&&(0===H[1]?(H[1]=9,F(),s=!0):10===H[1]&&(H[1]=1,F(),s=!0)),t+e===0&&!C||s||(C=!1,Object.values(T).forEach((function(t){Object.values(t).forEach((function(t){if(!t.moved){var e=t.takeTurn(H[0],H[1]);if(e)t.attackX===H[0]&&t.attackY===H[1]&&(j-=t.dmg),t.attackX=null,t.attackY=null;else if(!1===e){var a=H[0]-t.x,n=H[1]-t.y,o=Math.abs(a)/a||0,r=Math.abs(n)/n||0,i=t.x+o,s=t.y+r,l=!0,c=!0;void 0!==T[t.x][s]&&(c=!1),void 0!==T[i][t.y]&&(l=!1);var f=t;delete T[t.x][t.y],v(100)<50?c?f.y=s:l&&(f.x=i):l?f.x=i:c&&(f.y=s),f.moved=!0,T[f.x][f.y]=f}}}))}))),Object.values(T).forEach((function(t){Object.values(t).forEach((function(t){t.moved=!1}))})),j<=0&&(j=0,H[0]=-1e3,H[1]=-1e3,D=!0),Y.beginPath(),(x||D)&&(Y.globalAlpha=.5),Y.clearRect(0,0,950,550),Y.closePath();for(var l=1;l<18;l++)for(var c=1;c<10;c++)Y.beginPath(),Y.rect(50*l,50*c,50,50),Y.fillStyle=P,Y.fill(),Y.closePath();Y.beginPath();for(var f=0;f<19;f++)if(0!==f&&18!==f)for(var h=0;h<11;h++)0!==h&&10!==h||(9===f?Y.drawImage(d,50*f,50*h,50,50):Y.drawImage(b,50*f,50*h,50,50));else for(var g=0;g<=11;g++)5===g?Y.drawImage(d,50*f,50*g,50,50):Y.drawImage(b,50*f,50*g,50,50);Object.keys(A).forEach((function(t){for(var e=0;e<A[t].length;e++){var a=A[t][e][0],n=A[t][e][1];if(a===H[0]&&n===H[1])"G"===t?E++:O.push(t),A[t]=A[t].slice(0,e).concat(A[t].slice(e+1,A.length)),e--;else switch(t){case"G":Y.drawImage(y,50*a,50*n,50,50);break;case"HP":Y.drawImage(p,50*a,50*n,50,50);break;case"MP":Y.drawImage(w,50*a,50*n,50,50);break;default:console.log("Unknown Item: ".concat(t))}}})),r=H[0],i=H[1],o.beginPath(),o.fillStyle=P,o.fill(),o.drawImage(n,50*r,50*i,50,50),r,i,o.closePath(),Object.values(T).forEach((function(t){Object.values(t).forEach((function(t){Y.drawImage(t.monsterIMG,50*t.x,50*t.y,50,50),t.currentHP<t.maxHP&&(Y.fillStyle="#FFF",Y.rect(50*t.x,50*t.y,50,10),Y.fill(),Y.closePath(),Y.beginPath(),Y.fillStyle="#F00",Y.rect(50*t.x,50*t.y,t.currentHP/t.maxHP*50,10),Y.fill(),Y.closePath(),Y.beginPath()),null!==t.attackX&&(Y.globalAlpha=.5,Y.drawImage(t.monsterATK,50*t.attackX,50*t.attackY,50,50),Y.globalAlpha=1)}))})),Y.closePath(),!0===R&&(Y.beginPath(),Y.globalAlpha=.8,Y.drawImage(k,50*X[0],50*X[1],50,50),Y.globalAlpha=1,Y.closePath()),(x||D)&&(Y.globalAlpha=1),Y.beginPath(),Y.rect(950,0,300,550),Y.fillStyle="#666666",Y.fill(),Y.rect(972,90,250,250),Y.strokeStyle="#FFF",Y.stroke();for(var m=0;m<O.length;m++)switch(O[m]){case"HP":Y.drawImage(p,m%5*50+972,50*Math.floor(m/5)+90,50,50);break;case"MP":Y.drawImage(w,m%5*50+972,50*Math.floor(m/5)+90,50,50)}Y.closePath(),Y.beginPath(),Y.rect(972,45,250,15),Y.fillStyle="#FFF",Y.fill(),Y.closePath(),Y.beginPath(),Y.rect(972,45,250*j/100,15),Y.fillStyle="#F00",Y.fill(),Y.closePath(),Y.beginPath(),Y.rect(972,60,250,15),Y.fillStyle="#FFF",Y.fill(),Y.closePath(),Y.beginPath(),Y.rect(972,60,250*G/100,15),Y.fillStyle="#00F",Y.fill(),Y.closePath(),x&&(Y.beginPath(),Y.font="".concat(50,"px Roboto, sans serif"),Y.fillStyle="#000",Y.fillText("INVENTORY",275,275),Y.rect(I,M,50,50),Y.strokeStyle="#FFF",Y.stroke(),Y.closePath()),Y.beginPath(),Y.drawImage(y,970,0,50,50),Y.font="15px Roboto, sans serif",Y.fillStyle="#ffd700",Y.fillText("x ".concat(E),1030,30,225),Y.closePath(),D&&(Y.beginPath(),Y.font="".concat(50,"px Roboto, sans serif"),Y.fillStyle="#ff0000",Y.fillText("GAME OVER",275,300),Y.closePath())}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];R=t||!R,X[0]=H[0],X[1]=H[1]+1,U(0,0)},W=!1,B=!1,V=!0,N=document.getElementById("gameCanvas");N.width=1250,N.height=550,setTimeout((function(){U(0,0),_()}),100),console.log("Game Loaded"),document.addEventListener("keydown",(function(t){" "===t.key&&t.preventDefault();var e=0,a=0;"Right"==t.key||"ArrowRight"==t.key?e+=1:"Left"==t.key||"ArrowLeft"==t.key?e-=1:"Up"==t.key||"ArrowUp"==t.key?(t.preventDefault(),a-=1):"Down"!=t.key&&"ArrowDown"!=t.key||(t.preventDefault(),a+=1),"z"!==t.key&&"Z"!==t.key||V?"x"!==t.key&&"X"!==t.key||!B||V?"Escape"===t.key?(V=!V,_()):e+a==0||W||B||V?e+a!=0&&W&&!V?function(t,e){var a=I+50*t,n=M+50*e;a>=972&&a<1222&&(I=a,S+=t),n>=90&&n<340&&(M=n,S+=5*e),U(0,0)}(e,a):" "===t.key&&W&&!V?function(){if(O.length<S+1)Y.beginPath(),Y.font="10px Roboto, sans serif",Y.fillStyle="red",Y.fillText("Empty Slot",50*H[0],50*H[1]),Y.closePath();else{switch(O[S]){case"HP":j+=25;break;case"MP":G+=50}j>100&&(j=100),G>100&&(G=100),O=O.slice(0,S).concat(O.slice(S+1,O.length)),U(0,0)}}():e+a!=0&&B&&!V?function(t,e){X[0]=H[0]+t,X[1]=H[1]+e,U(0,0)}(e,a):" "!==t.key||W||V||(B?function(){C=!0;try{if(T[X[0]][X[1]].takeDmg(50)<=0){delete T[X[0]][X[1]];var t=v(100);t>99?A.MP.push([X[0],X[1]]):t>60?A.HP.push([X[0],X[1]]):A.G.push([X[0],X[1]])}L()}catch(t){console.log(t),L(),Y.beginPath(),Y.font="8px Roboto, sans serif",Y.fillStyle="red",Y.fillText("Waited a turn",50*H[0],50*H[1]),Y.closePath()}}():L(!0),B=!B):U(e,a):(L(!1),B=!1):(x=W=!W,U(0,0))}),!1)}]);
//# sourceMappingURL=main.js.map