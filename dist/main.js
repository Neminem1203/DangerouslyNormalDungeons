!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=1)}([function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(0);var o=new Image;o.src="https://image.flaticon.com/icons/svg/2328/2328493.svg";var n=document.getElementById("gameCanvas").getContext("2d");function r(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=new Image;s.src="https://image.flaticon.com/icons/svg/2196/2196893.svg";var c=new Image;c.src="https://image.flaticon.com/icons/svg/651/651510.svg";var l=new Image;l.src="https://image.flaticon.com/icons/svg/2286/2286964.svg";var i=new Image;i.src="https://image.flaticon.com/icons/svg/209/209853.svg";var f=new Image;f.src="https://image.flaticon.com/icons/svg/2534/2534552.svg";var g=new Image;g.src="https://image.flaticon.com/icons/svg/2068/2068587.svg";var h=new Image;h.src="https://image.flaticon.com/icons/svg/2624/2624475.svg";var m=new Image;m.src="https://image.flaticon.com/icons/svg/2674/2674440.svg";var u=function(){function e(t,a,o){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){case"o":this.name="Octopus",this.currentHP=100,this.maxHP=100,this.monsterIMG=s,this.monsterATK=c,this.dmg=10;break;case"w":this.name="Werewolf",this.currentHP=150,this.maxHP=150,this.monsterIMG=f,this.monsterATK=g,this.dmg=20;break;case"v":this.name="Vampire",this.currentHP=200,this.maxHP=200,this.monsterIMG=l,this.monsterATK=i,this.dmg=50;break;case"r":this.name="Reaper",this.currentHP=1e3,this.maxHP=1e3,this.monsterIMG=h,this.monsterATK=m,this.dmg=90;break;default:this.name="Unknown",this.currentHP=1,this.maxHP=1,this.monsterIMG=s,this.monsterATK=c,this.dmg=1}this.x=a,this.y=o,this.attackX=null,this.attackY=null,this.moved=!1}var t,a,o;return t=e,(a=[{key:"takeDmg",value:function(e){return this.currentHP-=e,this.currentHP}},{key:"takeTurn",value:function(e,t){return null!==this.attackX||(e===this.x&&1===Math.abs(t-this.y)||t===this.y&&1===Math.abs(e-this.x))&&(this.attackX=e,this.attackY=t,null)}},{key:"randomDrop",value:function(){var e,t=(e=100,Math.floor(Math.random()*e)+1);switch(console.log(t),this.name){case"Octopus":return t>70?"HP":"G";case"Werewolf":return t>60?"HP":"G";case"Vampire":return t>90?"INVULN":t>70?"ATK":t>50?"DEF":t>25?"HP":"G";case"Reaper":return t>40?"DEATH":t>20?"INVULN":"HP";case"Unknown":return"G"}}}])&&r(t.prototype,a),o&&r(t,o),e}(),v=function(e){return Math.floor(Math.random()*e)+1},b=new Image;b.src="https://image.flaticon.com/icons/svg/362/362944.svg";var d=new Image;d.src="https://image.flaticon.com/icons/svg/351/351764.svg";var p=new Image;p.src="https://www.flaticon.com/premium-icon/icons/svg/2401/2401054.svg";var y=new Image;y.src="https://image.flaticon.com/icons/svg/2833/2833434.svg";var P="#999",w=new Image;w.src="https://image.flaticon.com/icons/svg/506/506927.svg";var k=new Image;k.src="https://image.flaticon.com/icons/svg/1006/1006951.svg";var I=new Image;I.src="https://image.flaticon.com/icons/svg/649/649081.svg";var x=new Image;x.src="https://image.flaticon.com/icons/svg/1615/1615647.svg";var T=new Image;T.src="https://image.flaticon.com/icons/svg/2119/2119271.svg";var A=new Image;A.src="https://image.flaticon.com/icons/svg/1234/1234921.svg";var E=new Image;E.src="https://image.flaticon.com/icons/svg/361/361806.svg";var H=!1,F=972,M=90,S=0,D=[9,5],O={},N={},R=function(e,t){z[0]=e,z[1]=t},j=function(){N={},O={G:[],HP:[],MP:[],ATK:[],DEF:[],INVULN:[],DEATH:[]};for(var e=1;e<18;e++)N[e]={};for(var t=Math.floor(Math.log(v(34)-10)),a=0;a<t;a++){for(var o=D[0],n=D[1];D[0]===o&&D[1]===n;)o=v(17),n=v(9);var r=v(100);N[o][n]=new u(r>98?"r":r>80?"v":r>50?"w":"o",o,n)}},G=function(){D=[9,5],H=!1,U=0,K=["HP","ATK","DEF","INVULN","DEATH"],L=20,V=100,X=100,C=100,Y=50,_=0,W=0,B=0,Z=0,q=!1,J=[null,null],Q=!1,$=!1,ee=!1,j(),O={G:[[17,1],[17,2]],HP:[[16,2],[16,3]],MP:[],ATK:[],DEF:[],INVULN:[],DEATH:[]},oe(0,0)},U=0,K=["HP","ATK","DEF","INVULN","DEATH"],L=20,V=100,X=100,C=100,Y=50,_=0,W=0,B=0,Z=0,z=[0,0],q=!1,J=[null,null],Q=!1,$=!1,ee=!1,te=document.getElementById("gameCanvas").getContext("2d"),ae=function(){ee=!ee,oe(0,0)},oe=function(e,t){if(window.items=O,!(D[0]<0)&&(D[0]+e!==0&&D[0]+e!==18||5===D[1])&&(D[1]+t!==0&&D[1]+t!==10||9===D[0])){var a=!1;if(Object.values(N).forEach((function(o){Object.values(o).forEach((function(o){o.x===D[0]+e&&o.y===D[1]+t&&(a=!0)}))})),a||ee)return ee?(te.beginPath(),te.globalAlpha=.5,te.fillStyle="#555",te.rect(100,100,750,350),te.fill(),te.font="25px Roboto, sans serif",te.fillStyle="#FFF",te.fillText("Arrow keys = Movement",110,140),te.fillText("Spacebar = Use Item/Start Attack",110,170),te.fillText("Z = Inventory",110,200),te.fillText("Spacebar (After Starting Attack) = Attack/Wait",110,230),te.fillText("R = Restarts Game",110,260),te.font="15px Roboto, sans serif",te.fillText("Waiting occurs when you hit an empty area",500,245),te.font="30px Roboto, sans serif",te.fillText("Esc = Show/Hide Controls",110,430),te.globalAlpha=1,void te.closePath()):void 0;D[0]+=e,D[1]+=t,z[0]==D[0]&&z[1]==D[1]&&(D[0]-=e,D[1]-=t);var r,s,c=!1;5===D[1]?0===D[0]?(D[0]=17,R(D[0]+1,D[1]),j(),c=!0):18===D[0]&&(D[0]=1,R(D[0]-1,D[1]),j(),c=!0):9===D[0]&&(0===D[1]?(D[1]=9,R(D[0],D[1]+1),j(),c=!0):10===D[1]&&(D[1]=1,R(D[0],D[1]-1),j(),c=!0)),e+t===0&&!Q||c||(Q=!1,Object.values(N).forEach((function(e){Object.values(e).forEach((function(e){if(!e.moved){var t=e.takeTurn(D[0],D[1]);if(t)0===Z&&e.attackX===D[0]&&e.attackY===D[1]&&(L-=e.dmg-_),e.attackX=null,e.attackY=null;else if(!1===t){var a=D[0]-e.x,o=D[1]-e.y,n=Math.abs(a)/a||0,r=Math.abs(o)/o||0,s=e.x+n,c=e.y+r,l=!0,i=!0;void 0!==N[e.x][c]&&(i=!1),void 0!==N[s][e.y]&&(l=!1);var f=e;delete N[e.x][e.y],v(100)<50?i?f.y=c:l&&(f.x=s):l?f.x=s:i&&(f.y=c),f.moved=!0,N[f.x][f.y]=f}}}))})),Z>0&&Z--,B>0&&0==--B&&(_=0),W>0&&0==--W&&(Y=50)),Object.values(N).forEach((function(e){Object.values(e).forEach((function(e){e.moved=!1}))})),L<=0&&(L=0,D[0]=-1e3,D[1]=-1e3,$=!0),te.beginPath(),(H||$)&&(te.globalAlpha=.5),te.clearRect(0,0,950,550),te.closePath();for(var l=1;l<18;l++)for(var i=1;i<10;i++)te.beginPath(),te.rect(50*l,50*i,50,50),te.fillStyle=P,te.fill(),te.closePath();te.beginPath();for(var f=0;f<19;f++)if(0!==f&&18!==f)for(var g=0;g<11;g++)0!==g&&10!==g||(9===f?(console.log(f,g),z[0]===f&&z[1]===g?te.drawImage(y,50*f,50*g,50,50):te.drawImage(p,50*f,50*g,50,50)):te.drawImage(d,50*f,50*g,50,50));else for(var h=0;h<=11;h++)5===h?(console.log(f,h),z[0]===f&&z[1]===h?te.drawImage(y,50*f,50*h,50,50):te.drawImage(p,50*f,50*h,50,50)):te.drawImage(d,50*f,50*h,50,50);Object.keys(O).forEach((function(e){for(var t=0;t<O[e].length;t++){var a=O[e][t][0],o=O[e][t][1];if(a===D[0]&&o===D[1])"G"===e?U++:K.push(e),O[e]=O[e].slice(0,t).concat(O[e].slice(t+1,O.length)),t--;else switch(e){case"G":te.drawImage(b,50*a,50*o,50,50);break;case"HP":te.drawImage(w,50*a,50*o,50,50);break;case"MP":te.drawImage(k,50*a,50*o,50,50);break;case"ATK":te.drawImage(I,50*a,50*o,50,50);break;case"DEF":te.drawImage(x,50*a,50*o,50,50);break;case"INVULN":te.drawImage(T,50*a,50*o,50,50);break;case"DEATH":te.drawImage(A,50*a,50*o,50,50);break;default:console.log("Unknown Item: ".concat(e))}}})),Z>0&&(te.globalAlpha=.1),r=D[0],s=D[1],n.beginPath(),n.fillStyle=P,n.fill(),n.drawImage(o,50*r,50*s,50,50),r,s,n.closePath(),Z>0&&(te.globalAlpha=1),Object.values(N).forEach((function(e){Object.values(e).forEach((function(e){te.drawImage(e.monsterIMG,50*e.x,50*e.y,50,50),e.currentHP<e.maxHP&&(te.fillStyle="#FFF",te.rect(50*e.x,50*e.y,50,10),te.fill(),te.closePath(),te.beginPath(),te.fillStyle="#F00",te.rect(50*e.x,50*e.y,e.currentHP/e.maxHP*50,10),te.fill(),te.closePath(),te.beginPath()),null!==e.attackX&&(te.globalAlpha=.5,te.drawImage(e.monsterATK,50*e.attackX,50*e.attackY,50,50),te.globalAlpha=1)}))})),te.closePath(),!0===q&&(te.beginPath(),te.globalAlpha=.7,te.drawImage(E,50*J[0],50*J[1],50,50),te.globalAlpha=1,te.closePath()),(H||$)&&(te.globalAlpha=1),te.beginPath(),te.rect(950,0,300,550),te.fillStyle="#666666",te.fill(),te.rect(972,90,250,250),te.strokeStyle="#FFF",te.stroke();for(var m=0;m<K.length;m++)switch(K[m]){case"HP":te.drawImage(w,m%5*50+972,50*Math.floor(m/5)+90,50,50);break;case"MP":te.drawImage(k,m%5*50+972,50*Math.floor(m/5)+90,50,50);break;case"ATK":te.drawImage(I,m%5*50+972,50*Math.floor(m/5)+90,50,50);break;case"DEF":te.drawImage(x,m%5*50+972,50*Math.floor(m/5)+90,50,50);break;case"INVULN":te.drawImage(T,m%5*50+972,50*Math.floor(m/5)+90,50,50);break;case"DEATH":te.drawImage(A,m%5*50+972,50*Math.floor(m/5)+90,50,50)}te.closePath(),te.beginPath(),te.rect(972,45,250,15),te.fillStyle="#FFF",te.fill(),te.closePath(),te.beginPath(),te.rect(972,45,250*L/V,15),te.fillStyle="#F00",te.fill(),te.closePath(),te.beginPath(),te.rect(972,60,250,15),te.fillStyle="#FFF",te.fill(),te.closePath(),te.beginPath(),te.rect(972,60,250*X/C,15),te.fillStyle="#00F",te.fill(),te.closePath(),H&&(te.beginPath(),te.font="".concat(50,"px Roboto, sans serif"),te.fillStyle="#000",te.fillText("INVENTORY",275,275),te.rect(F,M,50,50),te.strokeStyle="#FFF",te.stroke(),te.closePath()),te.beginPath(),te.font="".concat(25,"px Roboto, sans serif"),te.fillStyle="#FFF",B>0&&te.fillText("DEF UP: ".concat(B),1e3,400),W>0&&te.fillText("ATK UP: ".concat(W),1e3,450),te.closePath(),te.beginPath(),te.drawImage(b,970,0,50,50),te.font="15px Roboto, sans serif",te.fillStyle="#ffd700",te.fillText("x ".concat(U),1030,30,225),te.closePath(),$&&(te.beginPath(),te.font="".concat(50,"px Roboto, sans serif"),te.fillStyle="#ff0000",te.fillText("GAME OVER",275,300),te.font="".concat(25,"px Roboto, sans serif"),te.fillText("press r to restart",275,320),te.closePath())}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];q=e||!q,J[0]=D[0],J[1]=D[1]+1,oe(0,0)};G();var re=!1,se=!1,ce=!0,le=document.getElementById("gameCanvas");le.width=1250,le.height=550,setTimeout((function(){oe(0,0),ae()}),100),console.log("Game Loaded"),document.addEventListener("keydown",(function(e){if("r"===e.key||"R"===e.key)return G(),ce=!1,se=!1,void(re=!1);" "===e.key&&e.preventDefault();var t=0,a=0;"Right"==e.key||"ArrowRight"==e.key?t+=1:"Left"==e.key||"ArrowLeft"==e.key?t-=1:"Up"==e.key||"ArrowUp"==e.key?(e.preventDefault(),a-=1):"Down"!=e.key&&"ArrowDown"!=e.key||(e.preventDefault(),a+=1),"z"!==e.key&&"Z"!==e.key||ce?"x"!==e.key&&"X"!==e.key||!se||ce?"Escape"!==e.key||re?t+a==0||re||se||ce?t+a!=0&&re&&!ce?function(e,t){var a=F+50*e,o=M+50*t;a>=972&&a<1222&&(F=a,S+=e),o>=90&&o<340&&(M=o,S+=5*t),oe(0,0)}(t,a):" "===e.key&&re&&!ce?function(){if(K.length<S+1)te.beginPath(),te.font="10px Roboto, sans serif",te.fillStyle="red",te.fillText("Empty Slot",50*D[0],50*D[1]),te.closePath();else{switch(K[S]){case"HP":L+=25;break;case"MP":X+=50;break;case"ATK":Y=100,W+=50;break;case"DEF":B+=50,_=10;break;case"INVULN":Z+=30;break;case"DEATH":N={}}L>V&&(L=V),X>C&&(X=C),K=K.slice(0,S).concat(K.slice(S+1,K.length)),oe(0,0)}}():t+a!=0&&se&&!ce?function(e,t){J[0]=D[0]+e,J[1]=D[1]+t,oe(0,0)}(t,a):" "!==e.key||re||ce||(se?function(){Q=!0;try{if(N[J[0]][J[1]].takeDmg(Y)<=0){var e=N[J[0]][J[1]].randomDrop();delete N[J[0]][J[1]],O[e].push([J[0],J[1]])}ne()}catch(e){console.log(e),ne(),te.beginPath(),te.font="8px Roboto, sans serif",te.fillStyle="red",te.fillText("Waited a turn",50*D[0],50*D[1]),te.closePath()}}():ne(!0),se=!se):oe(t,a):(ce=!ce,ae()):(ne(!1),se=!1):(H=re=!re,oe(0,0))}),!1)}]);
//# sourceMappingURL=main.js.map